<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Personal To‑Do Tracker — Sanju</title>
  <style>
    :root{
      --bg:#07101a; --card:#0e1b22; --muted:#9fb3c8; --accent1:#2ef3b0; --accent2:#6fe8ff;
      --glass: rgba(255,255,255,0.03);
      --glow: 0 6px 30px rgba(46,243,176,0.08);
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#041019 0%, #071426 100%);color:#e6f0f6}
    .wrap{max-width:980px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
    .brand{display:flex;flex-direction:column}
    h1{font-size:20px;margin:0;color:var(--accent1);text-shadow:0 2px 12px rgba(46,243,176,0.06)}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    .meta{font-size:13px;color:var(--muted)}

    .app{display:grid;grid-template-columns:1fr 340px;gap:18px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:12px;box-shadow:var(--glow);border:1px solid rgba(124,240,255,0.03)}

    /* Left - main */
    .controls{display:flex;gap:10px;margin-bottom:12px}
    input[type=text]{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    select{padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    button.primary{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#01202a;border:none;padding:10px 12px;border-radius:8px;cursor:pointer;font-weight:700;box-shadow:0 6px 18px rgba(110,232,255,0.06)}

    ul{list-style:none;padding:0;margin:0}
    li{display:flex;justify-content:space-between;align-items:center;padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);margin-bottom:10px;border:1px solid rgba(255,255,255,0.01);transition:transform .12s}
    li:hover{transform:translateY(-3px)}
    li.done{opacity:0.6;text-decoration:line-through}
    .left{display:flex;align-items:center;gap:12px}
    .title{font-size:15px}
    .tag{font-size:12px;padding:6px 8px;border-radius:8px;background:linear-gradient(90deg, rgba(46,243,176,0.06), rgba(111,232,255,0.03));color:var(--muted)}
    .actions button{background:transparent;border:none;color:var(--muted);cursor:pointer;margin-left:8px;font-size:16px}

    /* Right column */
    .filters{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}
    .chip{padding:8px 10px;border-radius:999px;background:rgba(255,255,255,0.02);cursor:pointer;color:var(--muted);font-size:13px;border:1px solid rgba(255,255,255,0.02)}
    .chip.active{background:linear-gradient(90deg, rgba(46,243,176,0.06), rgba(111,232,255,0.04));color:#01202a;border:1px solid rgba(46,243,176,0.12)}

    .quote{background:linear-gradient(90deg, rgba(111,232,255,0.03), rgba(46,243,176,0.03));padding:10px;border-radius:8px;margin-bottom:12px;color:var(--muted);font-style:italic}

    .footer{margin-top:16px;text-align:center;color:var(--muted);font-size:13px}
    .footer strong{color:var(--accent2)}

    /* modal */
    .modal{position:fixed;left:0;top:0;right:0;bottom:0;background:rgba(2,6,23,0.6);display:flex;align-items:center;justify-content:center;z-index:999}
    .modal .box{background:var(--card);padding:18px;border-radius:12px;min-width:320px;border:1px solid rgba(255,255,255,0.02)}
    .modal .box h3{margin:0 0 8px 0}
    .modal .box p{margin:0 0 12px 0;color:var(--muted)}
    .modal .box button{margin-right:8px}

    @media(max-width:900px){.app{grid-template-columns:1fr}.wrap{padding:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <h1>Personal To‑Do Tracker</h1>
        <p class="lead">Modern, private & lightweight — tasks saved locally in your browser.</p>
      </div>
      <div class="meta">Wake: 5:00–5:30 AM • Dinner: 8:30–9:00 PM</div>
    </header>

    <div class="app">
      <section class="card">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <div style="display:flex;flex-direction:column">
            <div class="quote" id="quoteBox">"Small steps every day lead to big results."</div>
            <div style="font-size:13px;color:var(--muted)">Tip: Click a task to toggle done — use Export to back up.</div>
          </div>
          <div>
            <button id="exportBtn" class="chip">Export</button>
            <button id="importBtn" class="chip">Import</button>
          </div>
        </div>

        <div class="controls">
          <input id="taskInput" type="text" placeholder="Add a task — e.g. Solve 2 DSA problems">
          <select id="category">
            <option value="DSA">DSA</option>
            <option value="Frontend">Frontend</option>
            <option value="ML">ML</option>
            <option value="LLM">LLM</option>
            <option value="Assignments">Assignments</option>
            <option value="Project">Project</option>
          </select>
          <button id="addBtn" class="primary">Add</button>
        </div>

        <ul id="todoList"></ul>
      </section>

      <aside class="card">
        <div style="margin-bottom:12px">
          <div style="font-weight:700;margin-bottom:6px">Filters</div>
          <div class="filters" id="filters">
            <div class="chip active" data-filter="all">All</div>
            <div class="chip" data-filter="DSA">DSA</div>
            <div class="chip" data-filter="Frontend">Frontend</div>
            <div class="chip" data-filter="ML">ML</div>
            <div class="chip" data-filter="LLM">LLM</div>
            <div class="chip" data-filter="Assignments">Assignments</div>
            <div class="chip" data-filter="Project">Project</div>
          </div>
        </div>

        <div style="margin-top:8px">
          <div style="font-weight:700;margin-bottom:6px">Backup / Restore</div>
          <div style="display:flex;gap:8px;margin-bottom:8px">
            <button id="exportBtn2" class="chip">Export JSON</button>
            <button id="importBtn2" class="chip">Import JSON</button>
          </div>
          <textarea id="importArea" placeholder="Paste JSON here to import" style="width:100%;height:90px;padding:8px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit"></textarea>
        </div>

        <div style="margin-top:12px;color:var(--muted)">Pro tip: Create daily tasks from your weekly checklist and mark them done — small wins add up.</div>
        <div class="footer">Designed by <strong>Sanju Maity</strong> • Tasks saved locally</div>
      </aside>
    </div>
  </div>

  <!-- Modal (hidden by default) -->
  <div id="modal" class="modal" style="display:none">
    <div class="box">
      <h3>Backup Reminder</h3>
      <p>Hey Sanju — it's Sunday 8 PM. Time to back up your tasks (Export JSON) to a safe file.</p>
      <div style="text-align:right;margin-top:12px">
        <button id="modalExport" class="primary">Export Now</button>
        <button id="modalClose" class="chip">Dismiss</button>
      </div>
    </div>
  </div>

  <script>
    // Quotes array
    const quotes = [
      "Small steps every day lead to big results.",
      "Focus on progress, not perfection.",
      "Consistency beats intensity — every time.",
      "Solve one problem today that your future self will thank you for.",
      "Learn a little, build a lot.",
      "Read, code, repeat.",
      "Ship fast. Iterate faster.",
      "Clarity comes from action, not thought."
    ];

    // Quote of the day based on date
    function setQuoteOfDay(){
      const idx = new Date().getDate() % quotes.length;
      document.getElementById('quoteBox').textContent = '"' + quotes[idx] + '"';
    }
    setQuoteOfDay();

    // Tasks
    const defaultTasks = [
      {text:'DSA: 2 problems (easy-medium)',cat:'DSA',done:false},
      {text:'Frontend: 30m HTML/CSS practice',cat:'Frontend',done:false},
      {text:'ML: Watch lecture + take notes',cat:'ML',done:false},
      {text:'LLM reading: 20 pages',cat:'LLM',done:false},
      {text:'Assignments: Work on submission',cat:'Assignments',done:false},
      {text:'Project: Integrate UI with API',cat:'Project',done:false}
    ];

    let tasks = JSON.parse(localStorage.getItem('personal_todo')) || defaultTasks.slice();
    let activeFilter = 'all';
    const list = document.getElementById('todoList');

    function save(){ localStorage.setItem('personal_todo', JSON.stringify(tasks)); }

    function render(){
      list.innerHTML='';
      tasks.filter(t=>activeFilter==='all' || t.cat===activeFilter).forEach((t,i)=>{
        const li = document.createElement('li');
        if(t.done) li.classList.add('done');

        const left = document.createElement('div'); left.className='left';
        const title = document.createElement('div'); title.className='title'; title.textContent = t.text;
        const tag = document.createElement('div'); tag.className='tag'; tag.textContent = t.cat;
        left.appendChild(title); left.appendChild(tag);
        left.onclick = ()=>{ t.done = !t.done; save(); render(); };

        const actions = document.createElement('div'); actions.className='actions';
        const editBtn = document.createElement('button'); editBtn.textContent='✎'; editBtn.title='Edit';
        editBtn.onclick = (e)=>{ e.stopPropagation(); const newText = prompt('Edit task', t.text); if(newText!==null){ t.text = newText.trim(); save(); render(); } };
        const delBtn = document.createElement('button'); delBtn.textContent='✕'; delBtn.title='Delete';
        delBtn.onclick = (e)=>{ e.stopPropagation(); if(confirm('Delete this task?')){ tasks.splice(i,1); save(); render(); } };

        actions.appendChild(editBtn); actions.appendChild(delBtn);
        li.appendChild(left); li.appendChild(actions);
        list.appendChild(li);
      });
    }

    document.getElementById('addBtn').onclick = ()=>{
      const val = document.getElementById('taskInput').value.trim();
      const cat = document.getElementById('category').value;
      if(!val) return alert('Enter a task');
      tasks.unshift({text:val,cat,done:false});
      document.getElementById('taskInput').value=''; save(); render();
    };

    document.querySelectorAll('.chip').forEach(chip=>{
      chip.addEventListener('click', ()=>{
        document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
        chip.classList.add('active'); activeFilter = chip.dataset.filter; render();
      });
    });

    // Export / Import (buttons)
    function doExport(){
      const data = JSON.stringify(tasks, null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'todo_backup.json'; a.click(); URL.revokeObjectURL(url);
    }
    document.getElementById('exportBtn').addEventListener('click', doExport);
    document.getElementById('exportBtn2').addEventListener('click', doExport);

    document.getElementById('importBtn').addEventListener('click', ()=>{
      const text = prompt('Paste exported JSON here'); if(!text) return; try{ const parsed = JSON.parse(text); if(!Array.isArray(parsed)) throw new Error('Invalid format'); tasks = parsed; save(); render(); alert('Imported successfully'); }catch(e){alert('Import failed: '+e.message)}
    });
    document.getElementById('importBtn2').addEventListener('click', ()=>{
      const text = document.getElementById('importArea').value.trim(); if(!text) return alert('Paste JSON into box'); try{ const parsed = JSON.parse(text); if(!Array.isArray(parsed)) throw new Error('Invalid format'); tasks = parsed; save(); document.getElementById('importArea').value=''; render(); alert('Imported successfully'); }catch(e){alert('Import failed: '+e.message)}
    });

    render();

    // Auto weekly backup reminder: show once per Sunday evening (20:00) local time
    const modal = document.getElementById('modal');
    const modalExport = document.getElementById('modalExport');
    const modalClose = document.getElementById('modalClose');

    function checkBackupReminder(){
      try{
        const lastShown = localStorage.getItem('backupReminderLastShown');
        const now = new Date();
        const isSundayEvening = (now.getDay()===0 && now.getHours()>=20);
        const todayISO = now.toISOString().slice(0,10);
        if(isSundayEvening && lastShown !== todayISO){
          modal.style.display='flex';
          localStorage.setItem('backupReminderLastShown', todayISO);
        }
      }catch(e){console.log(e)}
    }

    // check on load and every minute
    checkBackupReminder();
    setInterval(checkBackupReminder, 60*1000);

    modalExport.addEventListener('click', ()=>{ doExport(); modal.style.display='none'; });
    modalClose.addEventListener('click', ()=>{ modal.style.display='none'; });

    // Small UX: export on Ctrl+E, import on Ctrl+I
    document.addEventListener('keydown', (e)=>{
      if((e.ctrlKey || e.metaKey) && e.key.toLowerCase()==='e'){ e.preventDefault(); doExport(); }
      if((e.ctrlKey || e.metaKey) && e.key.toLowerCase()==='i'){ e.preventDefault(); const text = prompt('Paste exported JSON here'); if(!text) return; try{ const parsed = JSON.parse(text); if(!Array.isArray(parsed)) throw new Error('Invalid format'); tasks = parsed; save(); render(); alert('Imported successfully'); }catch(err){alert('Import failed: '+err.message)} }
    });

    // update quote each midnight
    setInterval(()=>{ const d=new Date(); if(d.getHours()===0 && d.getMinutes()===0) setQuoteOfDay(); }, 60*1000);
  </script>
</body>
</html>
